<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, novalidate: true }, local: true) do |form| %>
  <div class="form-outline<%= input_size_class_name(resource, :name) %>">
    <%= form.text_field :name, autocomplete: 'name', class: "form-control#{validate_class_name(action_name == 'update', resource, :name)}" %>
    <%= form.label '氏名', class: 'form-label', for: 'user_name' %>
    <%= render 'users/shared/field_error_messages', messages: resource.errors[:name] %>
  </div>

<% if devise_mapping.confirmable? && resource.pending_reconfirmation? && valid_confirmation_token? %>
  <div class="note note-info mb-3">
    確認待ち: <%= resource.unconfirmed_email %><br/>
    <small>※メールを確認してください。メールが届いていない場合は[メールアドレス確認]をしてください。</small>
  </div>
<% end %>

  <div class="form-outline<%= input_size_class_name(resource, :email) %>">
    <%= form.email_field :email, autocomplete: 'email', class: "form-control#{validate_class_name(action_name == 'update', resource, :email)}" %>
    <%= form.label 'メールアドレス', class: 'form-label', for: 'user_email' %>
    <%= render 'users/shared/field_error_messages', messages: resource.errors[:email] %>
  </div>

  <div class="form-outline<%= input_size_class_name(resource, :password) %>">
    <%= form.password_field :password, autocomplete: 'new-password', class: "form-control#{validate_class_name(action_name == 'update' && (params[:user][:password].present? || params[:user][:password_confirmation].present?), resource, :password, :password_confirmation)}" %>
    <%= form.label "パスワード#{" [#{@minimum_password_length}文字以上]" if @minimum_password_length} (変更する場合のみ)", class: 'form-label', for: 'user_password' %>
    <%= render 'users/shared/field_error_messages', messages: resource.errors[:password] %>
  </div>

  <div class="form-outline<%= input_size_class_name(resource, :password_confirmation) %>">
    <%= form.password_field :password_confirmation, autocomplete: 'new-password', class: "form-control#{validate_class_name(action_name == 'update' && (params[:user][:password].present? || params[:user][:password_confirmation].present?), resource, :password_confirmation, :password)}" %>
    <%= form.label 'パスワード(確認) (変更する場合のみ)', class: 'form-label', for: 'user_password_confirmation' %>
    <%= render 'users/shared/field_error_messages', messages: resource.errors[:password_confirmation] %>
  </div>

  <div class="form-outline<%= input_size_class_name(resource, :current_password) %>">
    <%= form.password_field :current_password, autocomplete: 'new-password', class: "form-control#{validate_password_class_name(action_name == 'update', resource)}" %>
    <%= form.label '現在のパスワード', class: 'form-label', for: 'user_current_password' %>
    <%= render 'users/shared/field_error_messages', messages: resource.errors[:current_password] %>
  </div>

  <%= form.submit '変更', class: 'btn btn-primary mb-4' %>
<% end %>
