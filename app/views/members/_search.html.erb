<%= form_with(url: members_path(@space.code), html: { method: :get, novalidate: true, autocomplete: 'on' }, data: { turbo: false }) do |form| %>
  <div class="d-flex align-items-center">
    <div class="form-outline" style="width: 57%; max-width: 400px">
      <%= form.text_field :text, value: @text, placeholder: "ユーザー名#{'やメールアドレス' if @current_member.power_admin?}を入力", autocomplete: 'on', class: 'form-control input_to_search_btn_enabled' %>
      <%= form.label :text, '検索', class: 'form-label' %>
    </div>
    <button id="search_btn" type="submit" class="btn btn-primary m-1" disabled>
      <i class="fas fa-search"></i>
    </button>
    <%= form.hidden_field :option, value: @option ? 1 : '' %>
    <button
      id="option_btn"
      type="button"
      class="btn btn-light btn-rounded d-flex m-1"
      data-mdb-toggle="collapse"
      data-mdb-target="#searchCollapse"
      aria-expanded="<%= @option %>"
      aria-controls="searchCollapse"
    >
      <i id="option_open" class="fas fa-caret-down fa-lg m-1" style="display: <%= @option ? 'none' : 'block' %>"></i>
      <i id="option_close" class="fas fa-caret-up fa-lg m-1"  style="display: <%= @option ? 'block' : 'none' %>"></i>
      <span class="d-none d-md-block">検索オプション</span>
    </button>
  </div>
  <div id="searchCollapse" class="collapse<%= ' show' if @option %>">
    <div class="row">
      <div class="col-auto d-flex pe-0 mt-2">
        <div>権限:</div>
      </div>
<% Member.powers.each_with_index do |(key, value), index| %>
      <div class="col-auto d-flex<%= ' pe-0' if index + 1 != Member.powers.count %> mt-2">
        <div class="form-check">
          <%= form.check_box "power[#{key}]", checked: @power[value], class: 'form-check-input click_to_search_btn_enabled' %>
          <%= form.label "power[#{key}]", Member.powers_i18n[key], class: 'form-check-label', for: "power[#{key}]" %>
        </div>
      </div>
<% end %>
      <div class="col-auto d-flex pe-0 mt-2">
        <div>状態:</div>
        <div class="form-check ms-2">
          <%= form.check_box :active, checked: @checked[:active], class: 'form-check-input click_to_search_btn_enabled' %>
          <%= form.label :active, '有効', class: 'form-check-label', for: 'active' %>
        </div>
        <div class="form-check ms-2">
          <%= form.check_box :destroy, checked: @checked[:destroy], class: 'form-check-input click_to_search_btn_enabled' %>
          <%= form.label :destroy, '削除予定', class: 'form-check-label', for: 'destroy' %>
        </div>
      </div>
    </div>
  </div>
<% end %>
